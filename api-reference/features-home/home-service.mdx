---
title: 'Home Service'
description: 'Public APIs and implementation details of the home.Service interface for retrieving todo lists'
---

# Table of Contents

- [Introduction](#introduction)
- [Service Interface and Implementation](#service-interface-and-implementation)
- [Key Methods](#key-methods)
- [Integration and Usage](#integration-and-usage)
- [Architecture Diagram](#architecture-diagram)
- [Source Code](#source-code)

---

## Introduction

The Home Service provides the business logic for the Home feature of the application. Its primary responsibility is to retrieve and list todo items from the underlying domain storage, making these todos available for rendering in the home page UI.

This service acts as an abstraction between the HTTP handlers (controllers) and the domain's `TodoRepository`, encapsulating all logic related to accessing todo data needed specifically by the Home feature.

---

## Service Interface and Implementation

The Home Service is defined by an interface that exposes a single method:

```go
// Service provides business operations for the Home feature.
type Service interface {
    List(ctx context.Context) ([]*domain.Todo, error)
}
```

Its concrete implementation, typically named `service`, holds a reference to a `domain.TodoRepository`:

```go
// service implements the Home Service interface.
type service struct {
    todos domain.TodoRepository
}

// NewService constructs a new Home Service with the provided TodoRepository
func NewService(todos domain.TodoRepository) Service {
    return &service{todos: todos}
}
```

The `List` method interacts with the repository to retrieve all todo items:

```go
func (s *service) List(ctx context.Context) ([]*domain.Todo, error) {
    return s.todos.All()
}
```

This keeps the service thin and focused, delegating persistence handling to the domain layer.

---

## Key Methods

### List(ctx context.Context) ([]*domain.Todo, error)

- Fetches all todo items by calling the `All()` method of the `TodoRepository`.
- Returns a slice of pointers to `domain.Todo` instances.
- Propagates any errors from the repository.

```go
// List returns all todos from the repository
func (s *service) List(ctx context.Context) ([]*domain.Todo, error) {
    return s.todos.All()
}
```

This is the only method exposed by the Home Service, reflecting the simple nature of the home page display requirements.

---

## Integration and Usage

The Home Service integrates within the broader application architecture as follows:

- **Dependencies:**
  - Depends on the `domain.TodoRepository` interface to perform todo data access operations.
  - Used by the Home feature's HTTP handler to serve requests.

- **Interaction pattern:**
  1. The HTTP handler calls `service.List(ctx)` to fetch todos.
  2. The service relays this call to the domain repository's `All()` method.
  3. The repository returns the todos stored in memory or persistent storage.
  4. The handler receives the todos and renders the home page template.

This layered separation allows independent testing and clear responsibility:

- The domain defines the core data and repository interface.
- The service implements business logic and coordinates domain interactions.
- The handler manages HTTP request/response cycles.

<br>

The Home Service is instantiated in the server entrypoint (`cmd/server/main.go`) with the in-memory `domain.Todos` repository:

```go
list := domain.NewTodos()
// Add example todos
list.Add("Buy milk")
list.Add("Learn Go")

homeService := home.NewService(list)
homeHandler := home.NewHandler(homeService)
home.Mount(router, homeHandler)
```

---

## Architecture Diagram

```mermaid
flowchart TD
  HTTP_Request[HTTP Request to `/`] -->|calls| Home_Handler[Home Handler]
  Home_Handler -->|calls| Home_Service[List(ctx)]
  Home_Service -->|calls| Todo_Repository_All[TodoRepository.All()]
  Todo_Repository_All -->|returns| Home_Service
  Home_Service -->|returns todos| Home_Handler
  Home_Handler -->|renders template| HTTP_Response[HTTP Response]
```

This diagram illustrates how a request to the root path flows through the system, beginning from the HTTP handler to the service and down to the domain repository, and then back up with the todo data for rendering.

---

## Source Code

- Home Service implementation: [internal/features/home/service.go](/internal/features/home/service.go)
- Domain TodoRepository interface: [internal/domain/todo_repository.go](/internal/domain/todo_repository.go)
- Server setup where service is instantiated: [cmd/server/main.go](/cmd/server/main.go)

---

The Home Service represents a simple but important abstraction in the application, neatly encapsulating logic for retrieving todos for the home page while depending on interfaces from the domain model, supporting maintainability, testability, and separation of concerns.